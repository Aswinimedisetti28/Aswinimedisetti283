<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Community | MelodyMist</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
:root{
  --gold:#d4af37;
  --gold-dark:#b8941f;
  --bg:#0a0a0a;
  --card:rgba(255,255,255,0.06);
}

body{
  font-family:'Poppins',sans-serif;
  background:radial-gradient(circle at top,#111,#000);
  color:#fff;
}

.hero{
  padding:100px 20px;
  text-align:center;
}

.hero h1{
  font-size:3.2rem;
  font-weight:800;
  background:linear-gradient(135deg,var(--gold),#fff);
  -webkit-background-clip:text;
  color:transparent;
}

.hero p{
  max-width:700px;
  margin:20px auto;
  opacity:.75;
}

.card-box{
  background:var(--card);
  border:1px solid rgba(212,175,55,.2);
  border-radius:25px;
  padding:40px;
  backdrop-filter:blur(20px);
  box-shadow:0 20px 60px rgba(0,0,0,.5);
}

.interests label{
  background:#000;
  border:1px solid var(--gold);
  padding:12px 20px;
  border-radius:30px;
  cursor:pointer;
  margin:5px;
  transition:.3s;
}

.interests input{
  display:none;
}

.interests input:checked + label{
  background:linear-gradient(135deg,var(--gold),var(--gold-dark));
  color:#000;
}

.btn-gold{
  background:linear-gradient(135deg,var(--gold),var(--gold-dark));
  border:none;
  color:#000;
  font-weight:700;
  padding:14px 35px;
  border-radius:30px;
}

.joined-box{
  text-align:center;
  padding:60px;
}

.joined-box i{
  font-size:4rem;
  color:var(--gold);
}
</style>
</head>

<body>

<section class="hero">
  <h1>MelodyMist Community ðŸŽ¶</h1>
  <p>
    Connect with music lovers, share moods, discover playlists,
    and vibe together emotionally.
  </p>
</section>

<div class="container mb-5">

{% if joined %}
  <!-- ALREADY JOINED -->
  <div class="card-box joined-box">
    <i class="fas fa-heartbeat mb-4"></i>
    <h2>Welcome, {{ username }} ðŸ’›</h2>
    <p class="mt-3">You are already part of our musical family.</p>
    <p><b>Your Interests:</b> {{ member.interests | join(', ') }}</p>

    <a href="/home" class="btn-gold mt-4">
      <i class="fas fa-music"></i> Go to Music
    </a>
  </div>

{% else %}
  <!-- JOIN FORM -->
  <div class="card-box">
    <h3 class="mb-4 text-center">Join the Community</h3>

    <form action="/join-community" method="POST">
      <div class="interests d-flex flex-wrap justify-content-center mb-4">
        {% for mood in ['Happy','Sad','Relaxed','Romantic','Energetic','Focus','Lo-Fi','Devotional'] %}
          <input type="checkbox" name="interests" value="{{ mood }}" id="{{ mood }}">
          <label for="{{ mood }}">{{ mood }}</label>
        {% endfor %}
      </div>

      <div class="text-center">
        <button type="submit" class="btn-gold">
          <i class="fas fa-users"></i> Join Community
        </button>
      </div>
    </form>
  </div>
{% endif %}

</div>

</body>
</html>
